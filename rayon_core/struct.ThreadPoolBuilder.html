<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `ThreadPoolBuilder` struct in crate `rayon_core`."><meta name="keywords" content="rust, rustlang, rust-lang, ThreadPoolBuilder"><title>rayon_core::ThreadPoolBuilder - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../rayon_core/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Struct ThreadPoolBuilder</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#implementations">Methods</a><div class="sidebar-links"><a href="#method.breadth_first">breadth_first</a><a href="#method.build">build</a><a href="#method.build_global">build_global</a><a href="#method.build_scoped">build_scoped</a><a href="#method.exit_handler">exit_handler</a><a href="#method.new">new</a><a href="#method.num_threads">num_threads</a><a href="#method.panic_handler">panic_handler</a><a href="#method.spawn_handler">spawn_handler</a><a href="#method.stack_size">stack_size</a><a href="#method.start_handler">start_handler</a><a href="#method.thread_name">thread_name</a></div><a class="sidebar-title" href="#trait-implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Debug">Debug</a><a href="#impl-Default">Default</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a><a href="#impl-Send">!Send</a><a href="#impl-Sync">!Sync</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">!UnwindSafe</a></div><a class="sidebar-title" href="#blanket-implementations">Blanket Implementations</a><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></div></div><p class='location'><a href='index.html'>rayon_core</a></p><script>window.sidebarCurrent = {name: 'ThreadPoolBuilder', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/rayon_core/lib.rs.html#117-146' title='goto source code'>[src]</a></span><span class='in-band'>Struct <a href='index.html'>rayon_core</a>::<wbr><a class="struct" href=''>ThreadPoolBuilder</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust struct'>pub struct ThreadPoolBuilder&lt;S&nbsp;=&nbsp;DefaultSpawn&gt; { /* fields omitted */ }</pre></div><div class='docblock'><p>Used to create a new <a href="struct.ThreadPool.html"><code>ThreadPool</code></a> or to configure the global rayon thread pool.</p>
<h2 id="creating-a-threadpool" class="section-header"><a href="#creating-a-threadpool">Creating a ThreadPool</a></h2>
<p>The following creates a thread pool with 22 threads.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">pool</span> <span class="op">=</span> <span class="ident">rayon</span>::<span class="ident">ThreadPoolBuilder</span>::<span class="ident">new</span>().<span class="ident">num_threads</span>(<span class="number">22</span>).<span class="ident">build</span>().<span class="ident">unwrap</span>();</pre></div>
<p>To instead configure the global thread pool, use <a href="struct.ThreadPoolBuilder.html#method.build_global"><code>build_global()</code></a>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">rayon</span>::<span class="ident">ThreadPoolBuilder</span>::<span class="ident">new</span>().<span class="ident">num_threads</span>(<span class="number">22</span>).<span class="ident">build_global</span>().<span class="ident">unwrap</span>();</pre></div>
</div><h2 id='implementations' class='small-section-header'>Implementations<a href='#implementations' class='anchor'></a></h2><h3 id='impl' class='impl'><code class='in-band'>impl <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a></code><a href='#impl' class='anchor'></a><a class='srclink' href='../src/rayon_core/lib.rs.html#186-191' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.new' class="method"><code id='new.v'>pub fn <a href='#method.new' class='fnname'>new</a>() -&gt; Self</code><a class='srclink' href='../src/rayon_core/lib.rs.html#188-190' title='goto source code'>[src]</a></h4><div class='docblock'><p>Creates and returns a valid rayon thread pool builder, but does not initialize it.</p>
</div></div><h3 id='impl-1' class='impl'><code class='in-band'>impl&lt;S&gt; <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;S&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: ThreadSpawn,&nbsp;</span></code><a href='#impl-1' class='anchor'></a><a class='srclink' href='../src/rayon_core/lib.rs.html#195-226' title='goto source code'>[src]</a></h3><div class='docblock'><p>Note: the <code>S: ThreadSpawn</code> constraint is an internal implementation detail for the
default spawn and those set by <a href="#method.spawn_handler"><code>spawn_handler</code></a>.</p>
</div><div class='impl-items'><h4 id='method.build' class="method"><code id='build.v'>pub fn <a href='#method.build' class='fnname'>build</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../rayon_core/struct.ThreadPool.html" title="struct rayon_core::ThreadPool">ThreadPool</a>, <a class="struct" href="../rayon_core/struct.ThreadPoolBuildError.html" title="struct rayon_core::ThreadPoolBuildError">ThreadPoolBuildError</a>&gt;</code><a class='srclink' href='../src/rayon_core/lib.rs.html#200-202' title='goto source code'>[src]</a></h4><div class='docblock'><p>Create a new <code>ThreadPool</code> initialized using this configuration.</p>
</div><h4 id='method.build_global' class="method"><code id='build_global.v'>pub fn <a href='#method.build_global' class='fnname'>build_global</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="../rayon_core/struct.ThreadPoolBuildError.html" title="struct rayon_core::ThreadPoolBuildError">ThreadPoolBuildError</a>&gt;</code><a class='srclink' href='../src/rayon_core/lib.rs.html#221-225' title='goto source code'>[src]</a></h4><div class='docblock'><p>Initializes the global thread pool. This initialization is
<strong>optional</strong>.  If you do not call this function, the thread pool
will be automatically initialized with the default
configuration. Calling <code>build_global</code> is not recommended, except
in two scenarios:</p>
<ul>
<li>You wish to change the default configuration.</li>
<li>You are running a benchmark, in which case initializing may
yield slightly more consistent results, since the worker threads
will already be ready to go even in the first iteration.  But
this cost is minimal.</li>
</ul>
<p>Initialization of the global thread pool happens exactly
once. Once started, the configuration cannot be
changed. Therefore, if you call <code>build_global</code> a second time, it
will return an error. An <code>Ok</code> result indicates that this
is the first initialization of the thread pool.</p>
</div></div><h3 id='impl-2' class='impl'><code class='in-band'>impl <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a></code><a href='#impl-2' class='anchor'></a><a class='srclink' href='../src/rayon_core/lib.rs.html#228-294' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.build_scoped' class="method"><code id='build_scoped.v'>pub fn <a href='#method.build_scoped' class='fnname'>build_scoped</a>&lt;W, F, R&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;wrapper: W, <br>&nbsp;&nbsp;&nbsp;&nbsp;with_pool: F<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;R, <a class="struct" href="../rayon_core/struct.ThreadPoolBuildError.html" title="struct rayon_core::ThreadPoolBuildError">ThreadPoolBuildError</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;W: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="struct" href="../rayon_core/struct.ThreadBuilder.html" title="struct rayon_core::ThreadBuilder">ThreadBuilder</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(&amp;<a class="struct" href="../rayon_core/struct.ThreadPool.html" title="struct rayon_core::ThreadPool">ThreadPool</a>) -&gt; R,&nbsp;</span></code><a class='srclink' href='../src/rayon_core/lib.rs.html#266-293' title='goto source code'>[src]</a></h4><div class='docblock'><p>Create a scoped <code>ThreadPool</code> initialized using this configuration.</p>
<p>This is a convenience function for building a pool using <a href="https://docs.rs/crossbeam/0.7/crossbeam/fn.scope.html"><code>crossbeam::scope</code></a>
to spawn threads in a <a href="#method.spawn_handler"><code>spawn_handler</code></a>.
The threads in this pool will start by calling <code>wrapper</code>, which should
do initialization and continue by calling <code>ThreadBuilder::run()</code>.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<p>A scoped pool may be useful in combination with scoped thread-local variables.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">

<span class="ident">scoped_tls</span>::<span class="macro">scoped_thread_local</span><span class="macro">!</span>(<span class="kw">static</span> <span class="ident">POOL_DATA</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">i32</span><span class="op">&gt;</span>);

<span class="kw">fn</span> <span class="ident">main</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">rayon</span>::<span class="ident">ThreadPoolBuildError</span><span class="op">&gt;</span> {
    <span class="kw">let</span> <span class="ident">pool_data</span> <span class="op">=</span> <span class="macro">vec</span><span class="macro">!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];

    <span class="comment">// We haven&#39;t assigned any TLS data yet.</span>
    <span class="macro">assert</span><span class="macro">!</span>(<span class="op">!</span><span class="ident">POOL_DATA</span>.<span class="ident">is_set</span>());

    <span class="ident">rayon</span>::<span class="ident">ThreadPoolBuilder</span>::<span class="ident">new</span>()
        .<span class="ident">build_scoped</span>(
            <span class="comment">// Borrow `pool_data` in TLS for each thread.</span>
            <span class="op">|</span><span class="ident">thread</span><span class="op">|</span> <span class="ident">POOL_DATA</span>.<span class="ident">set</span>(<span class="kw-2">&amp;</span><span class="ident">pool_data</span>, <span class="op">|</span><span class="op">|</span> <span class="ident">thread</span>.<span class="ident">run</span>()),
            <span class="comment">// Do some work that needs the TLS data.</span>
            <span class="op">|</span><span class="ident">pool</span><span class="op">|</span> <span class="ident">pool</span>.<span class="ident">install</span>(<span class="op">|</span><span class="op">|</span> <span class="macro">assert</span><span class="macro">!</span>(<span class="ident">POOL_DATA</span>.<span class="ident">is_set</span>())),
        )<span class="question-mark">?</span>;

    <span class="comment">// Once we&#39;ve returned, `pool_data` is no longer borrowed.</span>
    <span class="ident">drop</span>(<span class="ident">pool_data</span>);
    <span class="prelude-val">Ok</span>(())
}</pre></div>
</div></div><h3 id='impl-3' class='impl'><code class='in-band'>impl&lt;S&gt; <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;S&gt;</code><a href='#impl-3' class='anchor'></a><a class='srclink' href='../src/rayon_core/lib.rs.html#296-559' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.spawn_handler' class="method"><code id='spawn_handler.v'>pub fn <a href='#method.spawn_handler' class='fnname'>spawn_handler</a>&lt;F&gt;(self, spawn: F) -&gt; <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;CustomSpawn&lt;F&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="struct" href="../rayon_core/struct.ThreadBuilder.html" title="struct rayon_core::ThreadBuilder">ThreadBuilder</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;,&nbsp;</span></code><a class='srclink' href='../src/rayon_core/lib.rs.html#351-366' title='goto source code'>[src]</a></h4><div class='docblock'><p>Set a custom function for spawning threads.</p>
<p>Note that the threads will not exit until after the pool is dropped. It
is up to the caller to wait for thread termination if that is important
for any invariants. For instance, threads created in <a href="https://docs.rs/crossbeam/0.7/crossbeam/fn.scope.html"><code>crossbeam::scope</code></a>
will be joined before that scope returns, and this will block indefinitely
if the pool is leaked. Furthermore, the global thread pool doesn't terminate
until the entire process exits!</p>
<h1 id="examples-1" class="section-header"><a href="#examples-1">Examples</a></h1>
<p>A minimal spawn handler just needs to call <code>run()</code> from an independent thread.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">fn</span> <span class="ident">main</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">rayon</span>::<span class="ident">ThreadPoolBuildError</span><span class="op">&gt;</span> {
    <span class="kw">let</span> <span class="ident">pool</span> <span class="op">=</span> <span class="ident">rayon</span>::<span class="ident">ThreadPoolBuilder</span>::<span class="ident">new</span>()
        .<span class="ident">spawn_handler</span>(<span class="op">|</span><span class="ident">thread</span><span class="op">|</span> {
            <span class="ident">std</span>::<span class="ident">thread</span>::<span class="ident">spawn</span>(<span class="op">|</span><span class="op">|</span> <span class="ident">thread</span>.<span class="ident">run</span>());
            <span class="prelude-val">Ok</span>(())
        })
        .<span class="ident">build</span>()<span class="question-mark">?</span>;

    <span class="ident">pool</span>.<span class="ident">install</span>(<span class="op">|</span><span class="op">|</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Hello from my custom thread!&quot;</span>));
    <span class="prelude-val">Ok</span>(())
}</pre></div>
<p>The default spawn handler sets the name and stack size if given, and propagates
any errors from the thread builder.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">fn</span> <span class="ident">main</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">rayon</span>::<span class="ident">ThreadPoolBuildError</span><span class="op">&gt;</span> {
    <span class="kw">let</span> <span class="ident">pool</span> <span class="op">=</span> <span class="ident">rayon</span>::<span class="ident">ThreadPoolBuilder</span>::<span class="ident">new</span>()
        .<span class="ident">spawn_handler</span>(<span class="op">|</span><span class="ident">thread</span><span class="op">|</span> {
            <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">b</span> <span class="op">=</span> <span class="ident">std</span>::<span class="ident">thread</span>::<span class="ident">Builder</span>::<span class="ident">new</span>();
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">name</span>) <span class="op">=</span> <span class="ident">thread</span>.<span class="ident">name</span>() {
                <span class="ident">b</span> <span class="op">=</span> <span class="ident">b</span>.<span class="ident">name</span>(<span class="ident">name</span>.<span class="ident">to_owned</span>());
            }
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">stack_size</span>) <span class="op">=</span> <span class="ident">thread</span>.<span class="ident">stack_size</span>() {
                <span class="ident">b</span> <span class="op">=</span> <span class="ident">b</span>.<span class="ident">stack_size</span>(<span class="ident">stack_size</span>);
            }
            <span class="ident">b</span>.<span class="ident">spawn</span>(<span class="op">|</span><span class="op">|</span> <span class="ident">thread</span>.<span class="ident">run</span>())<span class="question-mark">?</span>;
            <span class="prelude-val">Ok</span>(())
        })
        .<span class="ident">build</span>()<span class="question-mark">?</span>;

    <span class="ident">pool</span>.<span class="ident">install</span>(<span class="op">|</span><span class="op">|</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Hello from my fully custom thread!&quot;</span>));
    <span class="prelude-val">Ok</span>(())
}</pre></div>
</div><h4 id='method.thread_name' class="method"><code id='thread_name.v'>pub fn <a href='#method.thread_name' class='fnname'>thread_name</a>&lt;F&gt;(self, closure: F) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a> + 'static,&nbsp;</span></code><a class='srclink' href='../src/rayon_core/lib.rs.html#407-413' title='goto source code'>[src]</a></h4><div class='docblock'><p>Set a closure which takes a thread index and returns
the thread's name.</p>
</div><h4 id='method.num_threads' class="method"><code id='num_threads.v'>pub fn <a href='#method.num_threads' class='fnname'>num_threads</a>(self, num_threads: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; Self</code><a class='srclink' href='../src/rayon_core/lib.rs.html#441-444' title='goto source code'>[src]</a></h4><div class='docblock'><p>Set the number of threads to be used in the rayon threadpool.</p>
<p>If you specify a non-zero number of threads using this
function, then the resulting thread-pools are guaranteed to
start at most this number of threads.</p>
<p>If <code>num_threads</code> is 0, or you do not call this function, then
the Rayon runtime will select the number of threads
automatically. At present, this is based on the
<code>RAYON_NUM_THREADS</code> environment variable (if set),
or the number of logical CPUs (otherwise).
In the future, however, the default behavior may
change to dynamically add or remove threads as needed.</p>
<p><strong>Future compatibility warning:</strong> Given the default behavior
may change in the future, if you wish to rely on a fixed
number of threads, you should use this function to specify
that number. To reproduce the current default behavior, you
may wish to use the <a href="https://crates.io/crates/num_cpus"><code>num_cpus</code>
crate</a> to query the number
of CPUs dynamically.</p>
<p><strong>Old environment variable:</strong> <code>RAYON_NUM_THREADS</code> is a one-to-one
replacement of the now deprecated <code>RAYON_RS_NUM_CPUS</code> environment
variable. If both variables are specified, <code>RAYON_NUM_THREADS</code> will
be prefered.</p>
</div><h4 id='method.panic_handler' class="method"><code id='panic_handler.v'>pub fn <a href='#method.panic_handler' class='fnname'>panic_handler</a>&lt;H&gt;(self, panic_handler: H) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>&gt;) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,&nbsp;</span></code><a class='srclink' href='../src/rayon_core/lib.rs.html#465-471' title='goto source code'>[src]</a></h4><div class='docblock'><p>Normally, whenever Rayon catches a panic, it tries to
propagate it to someplace sensible, to try and reflect the
semantics of sequential execution. But in some cases,
particularly with the <code>spawn()</code> APIs, there is no
obvious place where we should propagate the panic to.
In that case, this panic handler is invoked.</p>
<p>If no panic handler is set, the default is to abort the
process, under the principle that panics should not go
unobserved.</p>
<p>If the panic handler itself panics, this will abort the
process. To prevent this, wrap the body of your panic handler
in a call to <code>std::panic::catch_unwind()</code>.</p>
</div><h4 id='method.stack_size' class="method"><code id='stack_size.v'>pub fn <a href='#method.stack_size' class='fnname'>stack_size</a>(self, stack_size: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; Self</code><a class='srclink' href='../src/rayon_core/lib.rs.html#479-482' title='goto source code'>[src]</a></h4><div class='docblock'><p>Set the stack size of the worker threads</p>
</div><h4 id='method.breadth_first' class="method"><code id='breadth_first.v'>pub fn <a href='#method.breadth_first' class='fnname'>breadth_first</a>(self) -&gt; Self</code><a class='srclink' href='../src/rayon_core/lib.rs.html#513-516' title='goto source code'>[src]</a></h4><div class='stability'><div class='stab deprecated'><span class='emoji'>👎</span> Deprecated: <p>use <code>scope_fifo</code> and <code>spawn_fifo</code> for similar effect</p>
</div></div><div class='docblock'><p><strong>(DEPRECATED)</strong> Suggest to worker threads that they execute
spawned jobs in a &quot;breadth-first&quot; fashion.</p>
<p>Typically, when a worker thread is idle or blocked, it will
attempt to execute the job from the <em>top</em> of its local deque of
work (i.e., the job most recently spawned). If this flag is set
to true, however, workers will prefer to execute in a
<em>breadth-first</em> fashion -- that is, they will search for jobs at
the <em>bottom</em> of their local deque. (At present, workers <em>always</em>
steal from the bottom of other worker's deques, regardless of
the setting of this flag.)</p>
<p>If you think of the tasks as a tree, where a parent task
spawns its children in the tree, then this flag loosely
corresponds to doing a breadth-first traversal of the tree,
whereas the default would be to do a depth-first traversal.</p>
<p><strong>Note that this is an &quot;execution hint&quot;.</strong> Rayon's task
execution is highly dynamic and the precise order in which
independent tasks are executed is not intended to be
guaranteed.</p>
<p>This <code>breadth_first()</code> method is now deprecated per <a href="https://github.com/rayon-rs/rfcs/blob/master/accepted/rfc0001-scope-scheduling.md">RFC #1</a>,
and in the future its effect may be removed. Consider using
<a href="fn.scope_fifo.html"><code>scope_fifo()</code></a> for a similar effect.</p>
</div><h4 id='method.start_handler' class="method"><code id='start_handler.v'>pub fn <a href='#method.start_handler' class='fnname'>start_handler</a>&lt;H&gt;(self, start_handler: H) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,&nbsp;</span></code><a class='srclink' href='../src/rayon_core/lib.rs.html#533-539' title='goto source code'>[src]</a></h4><div class='docblock'><p>Set a callback to be invoked on thread start.</p>
<p>The closure is passed the index of the thread on which it is invoked.
Note that this same closure may be invoked multiple times in parallel.
If this closure panics, the panic will be passed to the panic handler.
If that handler returns, then startup will continue normally.</p>
</div><h4 id='method.exit_handler' class="method"><code id='exit_handler.v'>pub fn <a href='#method.exit_handler' class='fnname'>exit_handler</a>&lt;H&gt;(self, exit_handler: H) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,&nbsp;</span></code><a class='srclink' href='../src/rayon_core/lib.rs.html#552-558' title='goto source code'>[src]</a></h4><div class='docblock'><p>Set a callback to be invoked on thread exit.</p>
<p>The closure is passed the index of the thread on which it is invoked.
Note that this same closure may be invoked multiple times in parallel.
If this closure panics, the panic will be passed to the panic handler.
If that handler returns, then the thread will exit normally.</p>
</div></div><h2 id='trait-implementations' class='small-section-header'>Trait Implementations<a href='#trait-implementations' class='anchor'></a></h2><div id='trait-implementations-list'><h3 id='impl-Debug' class='impl'><code class='in-band'>impl&lt;S&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;S&gt;</code><a href='#impl-Debug' class='anchor'></a><a class='srclink' href='../src/rayon_core/lib.rs.html#668-704' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.fmt' class="method hidden"><code id='fmt.v'>fn <a href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt' class='fnname'>fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></code><a class='srclink' href='../src/rayon_core/lib.rs.html#669-703' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></div><h3 id='impl-Default' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a></code><a href='#impl-Default' class='anchor'></a><a class='srclink' href='../src/rayon_core/lib.rs.html#171-184' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.default' class="method hidden"><code id='default.v'>fn <a href='https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default' class='fnname'>default</a>() -&gt; Self</code><a class='srclink' href='../src/rayon_core/lib.rs.html#172-183' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Returns the &quot;default value&quot; for a type. <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></div></div><h2 id='synthetic-implementations' class='small-section-header'>Auto Trait Implementations<a href='#synthetic-implementations' class='anchor'></a></h2><div id='synthetic-implementations-list'><h3 id='impl-RefUnwindSafe' class='impl'><code class='in-band'>impl&lt;S&nbsp;=&nbsp;DefaultSpawn&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;S&gt;</code><a href='#impl-RefUnwindSafe' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Send' class='impl'><code class='in-band'>impl&lt;S&nbsp;=&nbsp;DefaultSpawn&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;S&gt;</code><a href='#impl-Send' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Sync' class='impl'><code class='in-band'>impl&lt;S&nbsp;=&nbsp;DefaultSpawn&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;S&gt;</code><a href='#impl-Sync' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Unpin' class='impl'><code class='in-band'>impl&lt;S&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;S&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,&nbsp;</span></code><a href='#impl-Unpin' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-UnwindSafe' class='impl'><code class='in-band'>impl&lt;S&nbsp;=&nbsp;DefaultSpawn&gt; !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="../rayon_core/struct.ThreadPoolBuilder.html" title="struct rayon_core::ThreadPoolBuilder">ThreadPoolBuilder</a>&lt;S&gt;</code><a href='#impl-UnwindSafe' class='anchor'></a></h3><div class='impl-items'></div></div><h2 id='blanket-implementations' class='small-section-header'>Blanket Implementations<a href='#blanket-implementations' class='anchor'></a></h2><div id='blanket-implementations-list'><h3 id='impl-Any' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Any' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/any.rs.html#108-112' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.type_id' class="method hidden"><code id='type_id.v'>fn <a href='https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id' class='fnname'>type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/any.rs.html#109-111' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></div><h3 id='impl-Borrow%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Borrow%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#213-217' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow' class="method hidden"><code id='borrow.v'>fn <a href='https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow' class='fnname'>borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#214-216' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></div><h3 id='impl-BorrowMut%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-BorrowMut%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#220-224' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow_mut' class="method hidden"><code id='borrow_mut.v'>fn <a href='https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut' class='fnname'>borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#221-223' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></div><h3 id='impl-From%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</code><a href='#impl-From%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#565-569' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.from' class="method hidden"><code id='from.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from' class='fnname'>from</a>(t: T) -&gt; T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#566-568' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-Into%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-Into%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#554-561' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.into' class="method hidden"><code id='into.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into' class='fnname'>into</a>(self) -&gt; U</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#558-560' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryFrom%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryFrom%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#602-611' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error' class="type"><code id='Error.t'>type <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error' class="type">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_from' class="method hidden"><code id='try_from.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from' class='fnname'>try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#608-610' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryInto%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryInto%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#588-597' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error-1' class="type"><code id='Error.t-1'>type <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error' class="type">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_into' class="method hidden"><code id='try_into.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into' class='fnname'>try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#594-596' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "rayon_core";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>